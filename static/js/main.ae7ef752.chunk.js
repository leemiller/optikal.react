(this["webpackJsonpoptikal.react"]=this["webpackJsonpoptikal.react"]||[]).push([[0],{100:function(t,e,n){"use strict";n.r(e);var r=n(1),i=n.n(r),c=n(20),a=n.n(c),o=(n(53),n(54),n(28)),s=n(8),u=n(22),l=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t*Math.PI/180;return{x:e*Math.cos(i)+n,y:e*Math.sin(i)+r}},h=function(t){null!==t&&t.setOffset({x:t.getWidth()/2,y:t.getHeight()/2})},f=n(2),d=n(47),j=n(34),b=n.n(j),g=n(25),O=n(26),m=b.a.mark(W),x=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(g.a)(this,t),this.name=e,this.color=n,this.altName=r}return Object(O.a)(t,[{key:"displayName",value:function(t){return t&&this.altName||this.name}}]),t}(),v=[new x("C","#ff0000"),new x("C\u266f","#ff6600","D\u266d"),new x("D","#ff9400"),new x("D\u266f","#ffc500","E\u266d"),new x("E","#ffff00"),new x("F","#8cc700"),new x("F\u266f","#0fad00","G\u266d"),new x("G","#00a3c7"),new x("G\u266f","#0064b5","A\u266d"),new x("A","#0010a5"),new x("A\u266f","#6300a5","B\u266d"),new x("B","#c5007c")],p=Object.fromEntries(v.map((function(t,e){return[t.name,e]})));v.indexFor=function(t){return p[t]};var k=v;function W(t){var e;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=p[t],n.next=3,v[e];case 3:if(!++e){n.next=8;break}return n.next=6,v[e%v.length];case 6:n.next=3;break;case 8:case"end":return n.stop()}}),m)}var w=function(t,e){if(isNaN(e))throw Error("Expected a number of elements in the note sequence, but got '".concat(e,"' instead"));var n,r=[],i=0,c=Object(d.a)(W(t));try{for(c.s();!(n=c.n()).done;){var a=n.value;if(i>=e)break;r.push(a),i++}}catch(o){c.e(o)}finally{c.f()}return r},N=256,y=192,S=360/k.length,H={guitar:{numFrets:22,strings:["E","B","G","D","A","E"],scaleLength:1100,stringSectionHeight:25,bindingHeight:20,nutWidth:15,heelWidth:25,fretWireWidth:4,fretMarkers:[3,5,7,9,12,15,17,19,21],fretboardColor:"#f2e9cc"},bass:{numFrets:20,strings:["G","D","A","E"],scaleLength:1200,stringSectionHeight:40,bindingHeight:20,nutWidth:15,heelWidth:30,fretWireWidth:6,fretMarkers:[1,3,5,7,9,12,15,17,19],fretboardColor:"#f2e9cc"},uke:{numFrets:17,strings:["G","C","A","E"],scaleLength:1020,stringSectionHeight:30,bindingHeight:20,heelWidth:20,nutWidth:10,fretWireWidth:5,fretMarkers:[5,7,10,12,15],fretboardColor:"#f2e9cc"}},F=n(7),M=n(12),I=function(){function t(e){Object(g.a)(this,t),this.notes=e}return Object(O.a)(t,[{key:"forTonic",value:function(t){return this.notes.map((function(e){return(e+t)%k.length}))}}]),t}(),E=Object.fromEntries(Object.entries({"-None-":[],Acoustic:[0,2,4,5,6,7,9,10],"Natural Minor":[0,2,3,5,7,8,10],Algerian:[0,2,3,6,7,8,11],Altered:[0,1,3,4,6,8,10],Augmented:[0,3,4,7,9,11],"Bebop Dominant":[0,2,4,5,7,9,10,11],Blues:[0,3,5,6,7,10],Chromatic:[0,1,2,3,4,5,6,7,8,9,10,11],"Double Harmonic":[0,1,4,5,7,8,11],Enigmatic:[0,1,4,6,8,10,11],Gypsy:[0,2,3,6,7,8,10],"Half Diminshed":[0,2,3,5,6,8,10],"Harmonic Major":[0,2,4,5,7,8,11],"Harmonc Minor":[0,2,3,5,7,8,11],Hirjoshi:[0,2,3,7,8],"Hungarian Minor":[0,2,3,6,7,8,11],Insen:[0,1,5,7,10],Major:[0,2,4,5,7,9,11],Istrian:[0,1,3,4,6,7],Iwato:[0,1,10,5,6],"Major Pentatonic Scale":[0,2,4,7,9]}).map((function(t){var e=Object(M.a)(t,2),n=e[0],r=e[1];return[n,new I(r)]}))),C=n(0),D=function(t){var e=t.labelOffset,n=void 0===e?12:e,i=Object(F.d)((function(t){return t.scaleName})),c=Object(F.d)((function(t){return t.tonicIndex})),a=E[i].forTonic(c),d=Object(r.useMemo)((function(){return a.map((function(t){var e=S*t-90;return{index:t,lineEnd:l(e,y,N,N),label:l(e,y+n,N,N)}}))}),[a,n]);if(0===d.length)return null;var j=function(t){var e=function(t){return{listening:!1,points:[N,N,t.x,t.y],fill:"white",stroke:"white",strokeWidth:2,shadowColor:"black",shadowBlur:3,shadowOffset:{x:0,y:0}}},n=Object(u.a)(t),i=n[0],c=n.slice(1).map((function(t){return Object(r.createElement)(f.d,Object(s.a)(Object(s.a)({},e(t.lineEnd)),{},{key:"".concat(t.index,"-line")}))}));return[Object(r.createElement)(f.a,Object(s.a)(Object(s.a)({},e(i.lineEnd)),{},{key:"".concat(i.index,"-arrow"),pointerLength:12,pointerWidth:8,radius:10}))].concat(Object(o.a)(c))}(d),b=d.map((function(t,e){return Object(C.jsx)(f.h,{x:t.label.x,y:t.label.y,text:e+1,fontSize:18,fill:"white",stroke:"black",strokeWidth:1,fillAfterStrokeEnabled:!0,shadowColor:"black",shadowBlur:4,ref:h},"".concat(t.label.x,",").concat(t.label.y,"-label"))}));return Object(C.jsxs)(f.c,{id:"scale-constellation",children:[Object(C.jsx)(f.b,{children:j}),Object(C.jsx)(f.b,{children:b})]})},A=n(49),L=i.a.forwardRef((function(t,e){var n=t.note,r=t.noteIndex,i=Object(A.a)(t,["note","noteIndex"]),c=-90-S/2+S*r;return Object(C.jsx)(f.i,Object(s.a)(Object(s.a)({},i),{},{x:N,y:N,radius:y,angle:S,initialangle:S,fill:n.color,note:n,rotation:c,initialrotation:c,scale:{x:1,y:1},opacity:1,ref:e}))})),P=n(32),B=function(t){var e=t.activeNote;return null===e?null:Object(C.jsx)(L,{note:e,noteIndex:k.indexFor(e.name),listening:!1,ref:function(t){if(null!==t){var e=1.15,n=t.attrs.initialangle*e,r=t.attrs.initialrotation-n/2+S/2;t.to({duration:.5,easing:P.Easings.ElasticEaseOut,scaleX:e,scaleY:e,angle:n,rotation:r})}}})},G="tonic/changed",T="scale/changed",z="flats/changed",J="selectedNote/changed",q="instrument/changed",R=function(t){return{type:J,selected:t}},U=function(){var t=Object(F.d)((function(t){return t.selectedNote})),e=Object(F.d)((function(t){return t.useFlats})),n=Object(F.c)(),r=k.map((function(t,e){return Object(C.jsx)(L,{note:t,noteIndex:e,onMouseOver:function(t){return n(R(t.target.attrs.note))},onMouseOut:function(){return n(R(null))}},t.name)})),i=k.map((function(t,n){var r=l(S*n-90,242,N,N);return Object(C.jsx)(f.h,{x:r.x,y:r.y,text:t.displayName(e),id:"label-".concat(t.name),fontSize:24,fill:"black",ref:h},t.name)}));return Object(C.jsxs)(f.c,{id:"color-wheel",children:[Object(C.jsx)(f.b,{children:r}),Object(C.jsx)(B,{activeNote:t}),Object(C.jsx)(f.b,{children:i})]})},X=function(t){var e=t.frettedNotesPerString,n=t.activeNote,r=t.stringIndex,i=t.stringHeight;return n?e[r][n.name].map((function(t,e){return Object(C.jsx)(f.e,Object(s.a)(Object(s.a)({},t),{},{height:i,fill:n.color,opacity:1}),"active-note-".concat(r+1,"-").concat(e+1))})):null},Y=function(t){var e=t.isInScale,n=t.stringNote,r=t.isActiveNote,i=t.stringIndex,c=t.width,a=t.height,o=t.stringSectionHeight,s=e||r?n.color:"gray",u=r?n.color:"gray",l=r?6:3;return Object(C.jsx)(f.e,{x:0,y:o/2+o*i-a/2,width:c,height:a,fill:s,stroke:u,strokeWidth:1,shadowBlur:l,shadowColor:"black",shadowEnabled:!0},"string-".concat(i+1))},K=function(t){var e=t.fretDistancesFromNut,n=t.fretWidths,r=t.frettedNotesPerString,i=t.openStringNoteName,c=t.stringIndex,a=t.activeNote,o=t.notesInScale,s=t.stringWidth,l=t.stringSectionHeight,h=t.numFrets,d=t.fretWireWidth,j=t.padding,b=w(i,h+1).map((function(t,e){return{note:t,position:e}})).filter((function(t,e){return o[t.note.name]||0===e})),g=Object(u.a)(b),O=g[0],m=g.slice(1),x=l*c,v=m.map((function(t){var r=e[t.position-1],i=n[t.position-1],a=j+r-i+d/2;return Object(C.jsx)(f.e,{x:a,y:x,width:i-d,height:l,fill:t.note.color,opacity:.75},"fret-".concat(c+1,"-").concat(t.position))}));return Object(C.jsxs)(C.Fragment,{children:[v,Object(C.jsx)(Y,{width:s,height:d,stringIndex:c,stringNote:O.note,stringSectionHeight:l,isInScale:o[O.note.name]||!1,isActiveNote:a&&a.name===O.note.name||!1}),Object(C.jsx)(X,{stringHeight:l,frettedNotesPerString:r,activeNote:a,stringIndex:c})]})},Q=function(t){var e=t.fretMarkerLocations,n=t.fretboardHeight,r=t.xOffset;return e.map((function(t){var e=2*n/3,i=(n-e)/2;return Object(C.jsx)(f.e,{x:t.markerStart+r,y:i,height:e,width:t.markerWidth,fill:"black"},"inlay-marker-".concat(t.markNumber))}))},V=function(t){var e=t.fretDistancesFromNut,n=t.xOffset,r=t.fretWireWidth,i=t.fretHeight;return e.map((function(t,e){return Object(C.jsx)(f.e,{name:"fret-".concat(e+1),x:n+t-r/2,y:0,width:r,height:i,fill:"silver"},t)}))},Z=function(t){var e=t.height,n=t.width,r=t.xOffset,i=t.yOffset,c=t.fretMarkerLocations;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(f.e,{name:"binding",x:r,y:i,width:n,height:e,fill:"black"}),c.map((function(t){var n=e/2,c=i+n/2;if(t.markNumber%12===0){var a=t.markerWidth/3,o=t.markerStart+2*a;return Object(C.jsxs)(f.b,{children:[Object(C.jsx)(f.e,{x:t.markerStart+r,y:c,height:n,width:a,fill:"white"}),Object(C.jsx)(f.e,{x:o+r,y:c,height:n,width:a,fill:"white"})]},"binding-octave-".concat(t.markNumber))}return Object(C.jsx)(f.e,{x:t.markerStart+r,y:c,height:n,width:t.markerWidth,fill:"white"},"binding-marker-".concat(t.markNumber))}))]})},$=function(t){var e=t.height,n=t.bindingHeight,r=t.width,i=t.displayWidth,c=t.nutWidth,a=t.fretWireWidth,o=t.boardColor,s=t.fretMarkerLocations,u=t.fretDistancesFromNut;return Object(C.jsxs)(f.b,{children:[Object(C.jsx)(f.e,{name:"nut",x:0,y:0,width:c,height:e,fill:"black"}),Object(C.jsx)(f.e,{name:"fingerboard",x:c,y:0,width:r,height:e,fill:o}),Object(C.jsx)(f.f,{name:"neck-heel",sceneFunc:function(t,n){t.beginPath(),t.moveTo(r+c,0),t.bezierCurveTo(i,0,i,e,r+c,e),t.closePath(),t.fillStrokeShape(n)},fill:o}),Object(C.jsx)(Q,{xOffset:c,fretboardHeight:e,fretMarkerLocations:s}),Object(C.jsx)(V,{xOffset:c,fretDistancesFromNut:u,fretWireWidth:a,fretHeight:e}),Object(C.jsx)(Z,{height:n,width:r,xOffset:c,yOffset:e,fretMarkerLocations:s})]})},_=function(t){var e=t.children,n=t.stageWidth,r=t.stageHeight;return Object(C.jsx)(F.b.Consumer,{children:function(t){var i=t.store;return Object(C.jsx)(f.g,{width:n,height:r,children:Object(C.jsx)(F.a,{store:i,children:e})})}})},tt=function(){var t=Object(F.d)((function(t){return t.instrument})),e=Object(F.d)((function(t){return t.selectedNote})),n=Object(F.d)((function(t){return t.scaleName})),i=Object(F.d)((function(t){return t.tonicIndex})),c=E[n].forTonic(i),a=H[t],s=Object(r.useMemo)((function(){return function(t){for(var e=Array.from({length:t.numFrets},(function(t,e){return e})).map((function(e){return t.scaleLength*(1-Math.pow(2,-(e+1)/12))})),n=[e[0]].concat(Object(o.a)(e.slice(1).map((function(t,n){return t-e[n]})))),r=e.slice(-1),i=Object(M.a)(r,1)[0],c=t.fretMarkers.map((function(t){var r=e[t-1],i=n[t-1];return{markNumber:t,markerStart:r-i+i/4,markerWidth:i/2}})),a=[],s=t.strings.map((function(e){return w(e,t.numFrets+1).map((function(t,e){return{note:t,position:e}}))})),u=0;u<s.length;u++){for(var l=s[u].slice(1),h={},f=t.stringSectionHeight*u,d=0;d<l.length;d++){var j=l[d];h[j.note.name]||(h[j.note.name]=[]);var b=e[j.position-1],g=n[j.position-1],O=b-g+t.fretWireWidth/2+t.nutWidth;h[j.note.name].push({x:O,y:f,width:g-t.fretWireWidth})}a.push(h)}return{fretWidths:n,fretDistancesFromNut:e,totalDistance:i,frettedNotesPerString:a,fretMarkerLocations:c}}(a)}),[a]),u=s.totalDistance,l=a.strings.length*a.stringSectionHeight,h=u+a.nutWidth+a.heelWidth,d=l+a.bindingHeight,j=Object.fromEntries(c.map((function(t){return[k[t].name,!0]})));return Object(C.jsx)(_,{stageWidth:h,stageHeight:d,children:Object(C.jsxs)(f.c,{children:[Object(C.jsx)($,{fretDistancesFromNut:s.fretDistancesFromNut,width:u,displayWidth:h,nutWidth:a.nutWidth,fretWireWidth:a.fretWireWidth,bindingHeight:a.bindingHeight,boardColor:a.fretboardColor,height:l,fretMarkerLocations:s.fretMarkerLocations}),Object(C.jsx)(f.b,{children:a.strings.map((function(t,n){return Object(C.jsx)(K,{frettedNotesPerString:s.frettedNotesPerString,fretDistancesFromNut:s.fretDistancesFromNut,fretWidths:s.fretWidths,fretWireWidth:a.fretWireWidth,numFrets:a.numFrets,padding:a.nutWidth,stringSectionHeight:a.stringSectionHeight,stringIndex:n,activeNote:e,notesInScale:j,openStringNoteName:t,stringWidth:h},"string-".concat(n+1,"-").concat(t))}))})]})})},et=function(){var t=Object(F.d)((function(t){return t.tonicIndex})),e=Object(F.d)((function(t){return t.useFlats})),n=Object(F.c)();return Object(C.jsx)("select",{id:"tonic",value:t,onChange:function(t){return n((e=parseInt(t.target.value,10),{type:G,index:e}));var e},children:k.map((function(t,n){return Object(C.jsx)("option",{value:n,children:t.displayName(e)},t.name)}))})},nt=function(){var t=Object(F.d)((function(t){return t.scaleName})),e=Object(F.c)();return Object(C.jsx)("select",{id:"scale",value:t,onChange:function(t){return e((n=t.target.value,{type:T,scale:n}));var n},children:Object.entries(E).map((function(t){var e=Object(M.a)(t,2),n=e[0];e[1];return Object(C.jsx)("option",{value:n,children:n},n)}))})},rt=function(){var t=Object(F.d)((function(t){return t.instrument})),e=Object(F.c)();return Object(C.jsx)("select",{id:"instrument",value:t,onChange:function(t){return e((n=t.target.value,{type:q,instrument:n}));var n},children:Object.entries(H).map((function(t){var e=Object(M.a)(t,2),n=e[0];e[1];return Object(C.jsx)("option",{value:n,children:n.charAt(0).toUpperCase()+n.slice(1)},n)}))})},it=function(){var t=Object(F.d)((function(t){return t.useFlats})),e=Object(F.c)();return Object(C.jsxs)("label",{children:[Object(C.jsx)("input",{type:"checkbox",checked:t,onChange:function(){return e(function(t){return{type:z,useFlats:t}}(!t))}}),"Show Flats"]})},ct=function(){return Object(C.jsxs)("div",{id:"option-selections",children:[Object(C.jsx)(et,{}),Object(C.jsx)(nt,{}),Object(C.jsx)(rt,{}),Object(C.jsx)(it,{})]})};var at=function(){return Object(C.jsxs)("div",{className:"App",children:[Object(C.jsx)(ct,{}),Object(C.jsxs)(_,{stageWidth:512,stageHeight:512,children:[Object(C.jsx)(U,{}),Object(C.jsx)(D,{})]}),Object(C.jsx)(tt,{})]})},ot=n(27),st={tonicIndex:0,scaleName:"Major",useFlats:!1,selectedNote:null,instrument:"guitar"};var ut=Object(ot.b)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case G:return Object(s.a)(Object(s.a)({},t),{},{tonicIndex:e.index});case T:return Object(s.a)(Object(s.a)({},t),{},{scaleName:e.scale});case z:return Object(s.a)(Object(s.a)({},t),{},{useFlats:e.useFlats});case J:return Object(s.a)(Object(s.a)({},t),{},{selectedNote:e.selected});case q:return Object(s.a)(Object(s.a)({},t),{},{instrument:e.instrument});default:return t}}));a.a.render(Object(C.jsx)(F.a,{store:ut,children:Object(C.jsx)(at,{})}),document.getElementById("root"))},53:function(t,e,n){},54:function(t,e,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.ae7ef752.chunk.js.map