(this["webpackJsonpoptikal.react"]=this["webpackJsonpoptikal.react"]||[]).push([[0],{45:function(t,e,n){},46:function(t,e,n){},88:function(t,e,n){"use strict";n.r(e);var r=n(6),i=n.n(r),a=n(37),c=n.n(a),o=(n(45),n(9)),s=(n(46),n(1)),u=n(39),l=n(28),h=n.n(l),f=n(40),d=h.a.mark(x),b=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(f.a)(this,t),this.name=e,this.color=n,this.altName=r},j=[new b("C","#ff0000"),new b("C\u266f","#ff6600","D\u266d"),new b("D","#ff9400"),new b("D\u266f","#ffc500","E\u266d"),new b("E","#ffff00"),new b("F","#8cc700"),new b("F\u266f","#0fad00","G\u266d"),new b("G","#00a3c7"),new b("G\u266f","#0064b5","A\u266d"),new b("A","#0010a5"),new b("A\u266f","#6300a5","B\u266d"),new b("B","#c5007c")],g=Object.fromEntries(j.map((function(t,e){return[t.name,e]})));j.indexFor=function(t){return g[t]};var m=j;function x(t){var e;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=g[t],n.next=3,j[e];case 3:if(!++e){n.next=8;break}return n.next=6,j[e%j.length];case 6:n.next=3;break;case 8:case"end":return n.stop()}}),d)}var O=function(t,e){if(isNaN(e))throw Error("Expected a number of elements in the note sequence, but got '".concat(e,"' instead"));var n,r=[],i=0,a=Object(u.a)(x(t));try{for(a.s();!(n=a.n()).done;){var c=n.value;if(i>=e)break;r.push(c),i++}}catch(o){a.e(o)}finally{a.f()}return r},v=n(23),p=n(10),N=n(22),k=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t*Math.PI/180;return{x:e*Math.cos(i)+n,y:e*Math.sin(i)+r}},w=function(t){null!==t&&t.setOffset({x:t.getWidth()/2,y:t.getHeight()/2})},W=256,S=192,y=360/m.length,I={guitar:{numFrets:22,strings:["E","B","G","D","A","E"],scaleLength:1100,stringSectionHeight:25,bindingHeight:20,nutWidth:15,heelWidth:25,fretWireWidth:4,fretMarkers:[3,5,7,9,12,15,17,19,21],fretboardColor:"#f2e9cc"},bass:{numFrets:20,strings:["G","D","A","E"],scaleLength:1200,stringSectionHeight:40,bindingHeight:20,nutWidth:15,heelWidth:30,fretWireWidth:6,fretMarkers:[1,3,5,7,9,12,15,17,19],fretboardColor:"#f2e9cc"},uke:{numFrets:17,strings:["G","C","A","E"],scaleLength:1020,stringSectionHeight:30,bindingHeight:20,heelWidth:20,nutWidth:10,fretWireWidth:5,fretMarkers:[5,7,10,12,15],fretboardColor:"#f2e9cc"}},H=n(0),M=function(t){var e=t.scaleNoteIndices,n=t.labelOffset,i=void 0===n?12:n,a=Object(r.useMemo)((function(){return e.map((function(t){var e=y*t-90;return{index:t,lineEnd:k(e,S,W,W),label:k(e,S+i,W,W)}}))}),[e,i]),c=function(t){var e=function(t){return{listening:!1,points:[W,W,t.x,t.y],fill:"white",stroke:"white",strokeWidth:2,shadowColor:"black",shadowBlur:3,shadowOffset:{x:0,y:0}}},n=Object(N.a)(t),i=n[0],a=n.slice(1).map((function(t){return Object(r.createElement)(s.d,Object(p.a)(Object(p.a)({},e(t.lineEnd)),{},{key:"".concat(t.index,"-line")}))}));return[Object(r.createElement)(s.a,Object(p.a)(Object(p.a)({},e(i.lineEnd)),{},{key:"".concat(i.index,"-arrow"),pointerLength:12,pointerWidth:8,radius:10}))].concat(Object(v.a)(a))}(a),o=a.map((function(t,e){return Object(H.jsx)(s.h,{x:t.label.x,y:t.label.y,text:e+1,fontSize:18,fill:"white",stroke:"black",strokeWidth:1,fillAfterStrokeEnabled:!0,shadowColor:"black",shadowBlur:4,ref:w},"".concat(t.label.x,",").concat(t.label.y,"-label"))}));return Object(H.jsxs)(s.c,{id:"scale-constellation",children:[Object(H.jsx)(s.b,{children:c}),Object(H.jsx)(s.b,{children:o})]})},F=n(41),E=i.a.forwardRef((function(t,e){var n=t.note,r=t.noteIndex,i=Object(F.a)(t,["note","noteIndex"]),a=-90-y/2+y*r;return Object(H.jsx)(s.i,Object(p.a)(Object(p.a)({},i),{},{x:W,y:W,radius:S,angle:y,initialangle:y,fill:n.color,note:n,rotation:a,initialrotation:a,scale:{x:1,y:1},opacity:1,ref:e}))})),C=n(27),D=function(t){var e=t.activeNote;return null===e?null:Object(H.jsx)(E,{note:e,noteIndex:m.indexFor(e.name),listening:!1,ref:function(t){if(null!==t){var e=1.15,n=t.attrs.initialangle*e,r=t.attrs.initialrotation-n/2+y/2;t.to({duration:.5,easing:C.Easings.ElasticEaseOut,scaleX:e,scaleY:e,angle:n,rotation:r})}}})},A=function(t){var e=t.activeNote,n=t.setActiveNote,r=t.getNoteName,i=m.map((function(t,e){return Object(H.jsx)(E,{note:t,noteIndex:e,onMouseOver:function(t){return n(t.target.attrs.note)},onMouseOut:function(){return n(null)}},t.name)})),a=m.map((function(t,e){var n=k(y*e-90,242,W,W);return Object(H.jsx)(s.h,{x:n.x,y:n.y,text:r(t),id:"label-".concat(t.name),fontSize:24,fill:"black",ref:w},t.name)}));return Object(H.jsxs)(s.c,{id:"color-wheel",children:[Object(H.jsx)(s.b,{children:i}),Object(H.jsx)(D,{activeNote:e}),Object(H.jsx)(s.b,{children:a})]})},L={Acoustic:[0,2,4,5,6,7,9,10],"Natural Minor":[0,2,3,5,7,8,10],Algerian:[0,2,3,6,7,8,11],Altered:[0,1,3,4,6,8,10],Augmented:[0,3,4,7,9,11],"Bebop Dominant":[0,2,4,5,7,9,10,11],Blues:[0,3,5,6,7,10],Chromatic:[0,1,2,3,4,5,6,7,8,9,10,11],"Double Harmonic":[0,1,4,5,7,8,11],Enigmatic:[0,1,4,6,8,10,11],Gypsy:[0,2,3,6,7,8,10],"Half Diminshed":[0,2,3,5,6,8,10],"Harmonic Major":[0,2,4,5,7,8,11],"Harmonc Minor":[0,2,3,5,7,8,11],Hirjoshi:[0,2,3,7,8],"Hungarian Minor":[0,2,3,6,7,8,11],Insen:[0,1,5,7,10],Major:[0,2,4,5,7,9,11],Istrian:[0,1,3,4,6,7],Iwato:[0,1,10,5,6],"Major Pentatonic Scale":[0,2,4,7,9]},P=function(t){var e=t.frettedNotesPerString,n=t.activeNote,r=t.stringIndex,i=t.stringHeight;return n?e[r][n.name].map((function(t,e){return Object(H.jsx)(s.e,Object(p.a)(Object(p.a)({},t),{},{height:i,fill:n.color,opacity:1}),"active-note-".concat(r+1,"-").concat(e+1))})):null},B=function(t){var e=t.isInScale,n=t.stringNote,r=t.isActiveNote,i=t.stringIndex,a=t.width,c=t.height,o=t.stringSectionHeight,u=e||r?n.color:"gray",l=r?n.color:"gray",h=r?6:3;return Object(H.jsx)(s.e,{x:0,y:o/2+o*i-c/2,width:a,height:c,fill:u,stroke:l,strokeWidth:1,shadowBlur:h,shadowColor:"black",shadowEnabled:!0},"string-".concat(i+1))},G=function(t){var e=t.fretDistancesFromNut,n=t.fretWidths,r=t.frettedNotesPerString,i=t.openStringNoteName,a=t.stringIndex,c=t.activeNote,o=t.notesInScale,u=t.stringWidth,l=t.stringSectionHeight,h=t.numFrets,f=t.fretWireWidth,d=t.padding,b=O(i,h+1).map((function(t,e){return{note:t,position:e}})).filter((function(t,e){return o[t.note.name]||0===e})),j=Object(N.a)(b),g=j[0],m=j.slice(1),x=l*a,v=m.map((function(t){var r=e[t.position-1],i=n[t.position-1],c=d+r-i+f/2;return Object(H.jsx)(s.e,{x:c,y:x,width:i-f,height:l,fill:t.note.color,opacity:.75},"fret-".concat(a+1,"-").concat(t.position))}));return Object(H.jsxs)(H.Fragment,{children:[v,Object(H.jsx)(B,{width:u,height:f,stringIndex:a,stringNote:g.note,stringSectionHeight:l,isInScale:o[g.note.name]||!1,isActiveNote:c&&c.name===g.note.name||!1}),Object(H.jsx)(P,{stringHeight:l,frettedNotesPerString:r,activeNote:c,stringIndex:a})]})},T=function(t){var e=t.fretMarkerLocations,n=t.fretboardHeight,r=t.xOffset;return e.map((function(t){var e=2*n/3,i=(n-e)/2;return Object(H.jsx)(s.e,{x:t.markerStart+r,y:i,height:e,width:t.markerWidth,fill:"black"},"inlay-marker-".concat(t.markNumber))}))},z=function(t){var e=t.fretDistancesFromNut,n=t.xOffset,r=t.fretWireWidth,i=t.fretHeight;return e.map((function(t,e){return Object(H.jsx)(s.e,{name:"fret-".concat(e+1),x:n+t-r/2,y:0,width:r,height:i,fill:"silver"},t)}))},U=function(t){var e=t.height,n=t.width,r=t.xOffset,i=t.yOffset,a=t.fretMarkerLocations;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(s.e,{name:"binding",x:r,y:i,width:n,height:e,fill:"black"}),a.map((function(t){var n=e/2,a=i+n/2;if(t.markNumber%12===0){var c=t.markerWidth/3,o=t.markerStart+2*c;return Object(H.jsxs)(s.b,{children:[Object(H.jsx)(s.e,{x:t.markerStart+r,y:a,height:n,width:c,fill:"white"}),Object(H.jsx)(s.e,{x:o+r,y:a,height:n,width:c,fill:"white"})]},"binding-octave-".concat(t.markNumber))}return Object(H.jsx)(s.e,{x:t.markerStart+r,y:a,height:n,width:t.markerWidth,fill:"white"},"binding-marker-".concat(t.markNumber))}))]})},J=function(t){var e=t.height,n=t.bindingHeight,r=t.width,i=t.displayWidth,a=t.nutWidth,c=t.fretWireWidth,o=t.boardColor,u=t.fretMarkerLocations,l=t.fretDistancesFromNut;return Object(H.jsxs)(s.b,{children:[Object(H.jsx)(s.e,{name:"nut",x:0,y:0,width:a,height:e,fill:"black"}),Object(H.jsx)(s.e,{name:"fingerboard",x:a,y:0,width:r,height:e,fill:o}),Object(H.jsx)(s.f,{name:"neck-heel",sceneFunc:function(t,n){t.beginPath(),t.moveTo(r+a,0),t.bezierCurveTo(i,0,i,e,r+a,e),t.closePath(),t.fillStrokeShape(n)},fill:o}),Object(H.jsx)(T,{xOffset:a,fretboardHeight:e,fretMarkerLocations:u}),Object(H.jsx)(z,{xOffset:a,fretDistancesFromNut:l,fretWireWidth:c,fretHeight:e}),Object(H.jsx)(U,{height:n,width:r,xOffset:a,yOffset:e,fretMarkerLocations:u})]})},q=function(t){var e=t.scaleNoteIndices,n=t.activeNote,i=t.instrumentSettings,a=Object(r.useMemo)((function(){return function(t){for(var e=Array.from({length:t.numFrets},(function(t,e){return e})).map((function(e){return t.scaleLength*(1-Math.pow(2,-(e+1)/12))})),n=[e[0]].concat(Object(v.a)(e.slice(1).map((function(t,n){return t-e[n]})))),r=e.slice(-1),i=Object(o.a)(r,1)[0],a=t.fretMarkers.map((function(t){var r=e[t-1],i=n[t-1];return{markNumber:t,markerStart:r-i+i/4,markerWidth:i/2}})),c=[],s=t.strings.map((function(e){return O(e,t.numFrets+1).map((function(t,e){return{note:t,position:e}}))})),u=0;u<s.length;u++){for(var l=s[u].slice(1),h={},f=t.stringSectionHeight*u,d=0;d<l.length;d++){var b=l[d];h[b.note.name]||(h[b.note.name]=[]);var j=e[b.position-1],g=n[b.position-1],m=j-g+t.fretWireWidth/2+t.nutWidth;h[b.note.name].push({x:m,y:f,width:g-t.fretWireWidth})}c.push(h)}return{fretWidths:n,fretDistancesFromNut:e,totalDistance:i,frettedNotesPerString:c,fretMarkerLocations:a}}(i)}),[i]),c=a.totalDistance,u=i.strings.length*i.stringSectionHeight,l=c+i.nutWidth+i.heelWidth,h=u+i.bindingHeight,f=Object.fromEntries(e.map((function(t){return[m[t].name,!0]})));return Object(H.jsx)(s.g,{width:l,height:h,children:Object(H.jsxs)(s.c,{children:[Object(H.jsx)(J,{fretDistancesFromNut:a.fretDistancesFromNut,width:c,displayWidth:l,nutWidth:i.nutWidth,fretWireWidth:i.fretWireWidth,bindingHeight:i.bindingHeight,boardColor:i.fretboardColor,height:u,fretMarkerLocations:a.fretMarkerLocations}),Object(H.jsx)(s.b,{children:i.strings.map((function(t,e){return Object(H.jsx)(G,{frettedNotesPerString:a.frettedNotesPerString,fretDistancesFromNut:a.fretDistancesFromNut,fretWidths:a.fretWidths,fretWireWidth:i.fretWireWidth,numFrets:i.numFrets,padding:i.nutWidth,stringSectionHeight:i.stringSectionHeight,stringIndex:e,activeNote:n,notesInScale:f,openStringNoteName:t,stringWidth:l},"string-".concat(e+1,"-").concat(t))}))})]})})},R=function(t){var e=t.tonicIndex,n=t.setTonicIndex,r=t.getNoteName;return Object(H.jsx)("select",{id:"tonic",value:e,onChange:function(t){return n(parseInt(t.target.value,10))},children:m.map((function(t,e){return Object(H.jsx)("option",{value:e,children:r(t)},t.name)}))})},X=function(t){var e=t.scaleName,n=t.setScaleName;return Object(H.jsx)("select",{id:"scale",value:e,onChange:function(t){return n(t.target.value)},children:Object.entries(L).map((function(t){var e=Object(o.a)(t,2),n=e[0];e[1];return Object(H.jsx)("option",{value:n,children:n},n)}))})},Y=function(t){var e=t.currentInstrument,n=t.setCurrentInstrument;return Object(H.jsx)("select",{id:"instrument",value:e,onChange:function(t){return n(t.target.value)},children:Object.entries(I).map((function(t){var e=Object(o.a)(t,2),n=e[0];e[1];return Object(H.jsx)("option",{value:n,children:n.charAt(0).toUpperCase()+n.slice(1)},n)}))})},K=function(t){var e=t.useFlats,n=t.setUseFlats;return Object(H.jsxs)("label",{children:[Object(H.jsx)("input",{type:"checkbox",checked:e,onChange:function(){return n(!e)}}),"Show Flats"]})};var Q=function(){var t=Object(r.useState)(0),e=Object(o.a)(t,2),n=e[0],i=e[1],a=Object(r.useState)("Major"),c=Object(o.a)(a,2),u=c[0],l=c[1],h=Object(r.useState)(!1),f=Object(o.a)(h,2),d=f[0],b=f[1],j=Object(r.useState)(null),g=Object(o.a)(j,2),x=g[0],O=g[1],v=Object(r.useState)("guitar"),p=Object(o.a)(v,2),N=p[0],k=p[1],w=Object(r.useMemo)((function(){return function(t){return d&&t.altName||t.name}}),[d]),W=Object(r.useMemo)((function(){return L[u].map((function(t){return(t+n)%m.length}))}),[u,n]);return Object(H.jsxs)("div",{className:"App",children:[Object(H.jsxs)("div",{id:"option-selections",children:[Object(H.jsx)(R,{getNoteName:w,setTonicIndex:i,tonicIndex:n}),Object(H.jsx)(X,{setScaleName:l,scaleName:u}),Object(H.jsx)(Y,{setCurrentInstrument:k,currentInstrument:N}),Object(H.jsx)(K,{setUseFlats:b,useFlats:d})]}),Object(H.jsxs)(s.g,{width:512,height:512,children:[Object(H.jsx)(A,{getNoteName:w,setActiveNote:O,activeNote:x}),Object(H.jsx)(M,{scaleNoteIndices:W})]}),Object(H.jsx)(q,{scaleNoteIndices:W,activeNote:x,instrumentSettings:I[N]})]})};c.a.render(Object(H.jsx)(i.a.StrictMode,{children:Object(H.jsx)(Q,{})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.d24435f1.chunk.js.map